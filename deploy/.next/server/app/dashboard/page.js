(()=>{var e={};e.id=105,e.ids=[105],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4780:(e,t,r)=>{"use strict";r.d(t,{cn:()=>a});var s=r(49384),n=r(82348);function a(...e){return(0,n.QP)((0,s.$)(e))}},6583:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,86346,23)),Promise.resolve().then(r.t.bind(r,27924,23)),Promise.resolve().then(r.t.bind(r,35656,23)),Promise.resolve().then(r.t.bind(r,40099,23)),Promise.resolve().then(r.t.bind(r,38243,23)),Promise.resolve().then(r.t.bind(r,28827,23)),Promise.resolve().then(r.t.bind(r,62763,23)),Promise.resolve().then(r.t.bind(r,97173,23))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},15888:(e,t,r)=>{"use strict";r.d(t,{Providers:()=>a});var s=r(60687),n=r(82136);function a({children:e}){return(0,s.jsx)(n.SessionProvider,{refetchInterval:0,refetchOnWindowFocus:!1,children:e})}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29523:(e,t,r)=>{"use strict";r.d(t,{$:()=>d});var s=r(60687);r(43210);var n=r(81391),a=r(24224),i=r(4780);let o=(0,a.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d({className:e,variant:t,size:r,asChild:a=!1,...d}){let l=a?n.DX:"button";return(0,s.jsx)(l,{"data-slot":"button",className:(0,i.cn)(o({variant:t,size:r,className:e})),...d})}},33873:e=>{"use strict";e.exports=require("path")},34222:(e,t,r)=>{Promise.resolve().then(r.bind(r,80559))},44493:(e,t,r)=>{"use strict";r.d(t,{BT:()=>d,Wu:()=>l,ZB:()=>o,Zp:()=>a,aR:()=>i,wL:()=>c});var s=r(60687);r(43210);var n=r(4780);function a({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card",className:(0,n.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function i({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,n.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function o({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,n.cn)("leading-none font-semibold",e),...t})}function d({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,n.cn)("text-muted-foreground text-sm",e),...t})}function l({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,n.cn)("px-6",e),...t})}function c({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"card-footer",className:(0,n.cn)("flex items-center px-6 [.border-t]:pt-6",e),...t})}},46335:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,16444,23)),Promise.resolve().then(r.t.bind(r,16042,23)),Promise.resolve().then(r.t.bind(r,88170,23)),Promise.resolve().then(r.t.bind(r,49477,23)),Promise.resolve().then(r.t.bind(r,29345,23)),Promise.resolve().then(r.t.bind(r,12089,23)),Promise.resolve().then(r.t.bind(r,46577,23)),Promise.resolve().then(r.t.bind(r,31307,23))},48150:(e,t,r)=>{"use strict";r.d(t,{Providers:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call Providers() from the server but Providers is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\driss\\projects\\ai\\response_api\\src\\components\\providers.tsx","Providers")},55952:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>l});var s=r(65239),n=r(48088),a=r(88170),i=r.n(a),o=r(30893),d={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);r.d(t,d);let l={children:["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,80559)),"C:\\driss\\projects\\ai\\response_api\\src\\app\\dashboard\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"C:\\driss\\projects\\ai\\response_api\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\driss\\projects\\ai\\response_api\\src\\app\\dashboard\\page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},56538:(e,t,r)=>{Promise.resolve().then(r.bind(r,48150))},59337:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var s=r(60687),n=r(43210),a=r(82136),i=r(16189),o=r(4780);function d({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,s.jsx)("table",{"data-slot":"table",className:(0,o.cn)("w-full caption-bottom text-sm",e),...t})})}function l({className:e,...t}){return(0,s.jsx)("thead",{"data-slot":"table-header",className:(0,o.cn)("[&_tr]:border-b",e),...t})}function c({className:e,...t}){return(0,s.jsx)("tbody",{"data-slot":"table-body",className:(0,o.cn)("[&_tr:last-child]:border-0",e),...t})}function u({className:e,...t}){return(0,s.jsx)("tr",{"data-slot":"table-row",className:(0,o.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function h({className:e,...t}){return(0,s.jsx)("th",{"data-slot":"table-head",className:(0,o.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function p({className:e,...t}){return(0,s.jsx)("td",{"data-slot":"table-cell",className:(0,o.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}var x=r(44493),m=r(91821),v=r(29523),f=["color"],g=(0,n.forwardRef)(function(e,t){var r=e.color,s=function(e,t){if(null==e)return{};var r,s,n={},a=Object.keys(e);for(s=0;s<a.length;s++)r=a[s],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,f);return(0,n.createElement)("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:t}),(0,n.createElement)("path",{d:"M1.84998 7.49998C1.84998 4.66458 4.05979 1.84998 7.49998 1.84998C10.2783 1.84998 11.6515 3.9064 12.2367 5H10.5C10.2239 5 10 5.22386 10 5.5C10 5.77614 10.2239 6 10.5 6H13.5C13.7761 6 14 5.77614 14 5.5V2.5C14 2.22386 13.7761 2 13.5 2C13.2239 2 13 2.22386 13 2.5V4.31318C12.2955 3.07126 10.6659 0.849976 7.49998 0.849976C3.43716 0.849976 0.849976 4.18537 0.849976 7.49998C0.849976 10.8146 3.43716 14.15 7.49998 14.15C9.44382 14.15 11.0622 13.3808 12.2145 12.2084C12.8315 11.5806 13.3133 10.839 13.6418 10.0407C13.7469 9.78536 13.6251 9.49315 13.3698 9.38806C13.1144 9.28296 12.8222 9.40478 12.7171 9.66014C12.4363 10.3425 12.0251 10.9745 11.5013 11.5074C10.5295 12.4963 9.16504 13.15 7.49998 13.15C4.05979 13.15 1.84998 10.3354 1.84998 7.49998Z",fill:void 0===r?"currentColor":r,fillRule:"evenodd",clipRule:"evenodd"}))});function b(){let{data:e,status:t}=(0,a.useSession)(),r=(0,i.useRouter)(),[o,f]=(0,n.useState)([]),[b,j]=(0,n.useState)(null),[w,y]=(0,n.useState)(!0),N=async()=>{try{y(!0),j(null),console.log("Current session state:",{status:t,session:e,isAuthenticated:"authenticated"===t});let r=await fetch("/api/users",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),s=await r.json();if(!r.ok)throw Error(s.error||`HTTP error! status: ${r.status}`);f(s)}catch(e){console.error("Error fetching users:",e),j(e instanceof Error?e.message:"Failed to load users. Please try again later.")}finally{y(!1)}};return"loading"===t?(0,s.jsx)("main",{className:"container mx-auto py-10",children:(0,s.jsx)(x.Zp,{children:(0,s.jsxs)(x.Wu,{className:"p-6 flex items-center justify-center",children:[(0,s.jsx)(g,{className:"mr-2 h-4 w-4 animate-spin"}),(0,s.jsx)("span",{children:"Checking authentication..."})]})})}):w&&"authenticated"===t?(0,s.jsx)("main",{className:"container mx-auto py-10",children:(0,s.jsx)(x.Zp,{children:(0,s.jsxs)(x.Wu,{className:"p-6 flex items-center justify-center",children:[(0,s.jsx)(g,{className:"mr-2 h-4 w-4 animate-spin"}),(0,s.jsx)("span",{children:"Loading users..."})]})})}):"unauthenticated"===t?(r.push("/login"),(0,s.jsx)("main",{className:"container mx-auto py-10",children:(0,s.jsx)(x.Zp,{children:(0,s.jsx)(x.Wu,{className:"p-6",children:(0,s.jsxs)(m.Fc,{children:[(0,s.jsx)(m.XL,{children:"Not Authenticated"}),(0,s.jsx)(m.TN,{children:"Please log in to access this page. Redirecting to login..."})]})})})})):e?.user?.role!=="ADMIN"?(0,s.jsx)("main",{className:"container mx-auto py-10",children:(0,s.jsx)(x.Zp,{children:(0,s.jsx)(x.Wu,{className:"p-6",children:(0,s.jsxs)(m.Fc,{variant:"destructive",children:[(0,s.jsx)(m.XL,{children:"Access Denied"}),(0,s.jsxs)(m.TN,{children:["You do not have permission to access this page. Please contact an administrator if you believe this is a mistake.",(0,s.jsxs)("div",{className:"mt-2 text-sm text-muted-foreground",children:["Current role: ",e?.user?.role||"No role assigned"]})]})]})})})}):(0,s.jsx)("main",{className:"container mx-auto py-10",children:(0,s.jsxs)(x.Zp,{children:[(0,s.jsxs)(x.aR,{className:"flex flex-row items-center justify-between",children:[(0,s.jsx)(x.ZB,{children:"User Management"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Logged in as: ",e.user.email]}),(0,s.jsxs)(v.$,{onClick:N,disabled:w,variant:"outline",size:"sm",children:[w&&(0,s.jsx)(g,{className:"mr-2 h-4 w-4 animate-spin"}),"Refresh"]})]})]}),(0,s.jsx)(x.Wu,{children:b?(0,s.jsxs)(m.Fc,{variant:"destructive",children:[(0,s.jsx)(m.XL,{children:"Error"}),(0,s.jsxs)(m.TN,{className:"flex flex-col gap-2",children:[(0,s.jsx)("p",{children:b}),(0,s.jsx)(v.$,{onClick:N,variant:"outline",size:"sm",className:"w-fit",children:"Try Again"})]})]}):(0,s.jsxs)(d,{children:[(0,s.jsx)(l,{children:(0,s.jsxs)(u,{children:[(0,s.jsx)(h,{children:"ID"}),(0,s.jsx)(h,{children:"Email"}),(0,s.jsx)(h,{children:"Name"}),(0,s.jsx)(h,{children:"Role"}),(0,s.jsx)(h,{children:"Created At"})]})}),(0,s.jsxs)(c,{children:[o.map(e=>(0,s.jsxs)(u,{children:[(0,s.jsx)(p,{children:e.id}),(0,s.jsx)(p,{children:e.email}),(0,s.jsx)(p,{children:e.name||"-"}),(0,s.jsx)(p,{children:e.role}),(0,s.jsx)(p,{children:new Date(e.createdAt).toLocaleDateString()})]},e.id)),0===o.length&&(0,s.jsx)(u,{children:(0,s.jsx)(p,{colSpan:5,className:"text-center",children:"No users found"})})]})]})})]})})}},61135:()=>{},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70440:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(31658);let n=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},79551:e=>{"use strict";e.exports=require("url")},80559:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\driss\\\\projects\\\\ai\\\\response_api\\\\src\\\\app\\\\dashboard\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\driss\\projects\\ai\\response_api\\src\\app\\dashboard\\page.tsx","default")},91821:(e,t,r)=>{"use strict";r.d(t,{Fc:()=>o,TN:()=>l,XL:()=>d});var s=r(60687);r(43210);var n=r(24224),a=r(4780);let i=(0,n.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function o({className:e,variant:t,...r}){return(0,s.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,a.cn)(i({variant:t}),e),...r})}function d({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"alert-title",className:(0,a.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e),...t})}function l({className:e,...t}){return(0,s.jsx)("div",{"data-slot":"alert-description",className:(0,a.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}},94431:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d,metadata:()=>o});var s=r(37413),n=r(85041),a=r.n(n),i=r(48150);r(61135);let o={title:"Admin Dashboard",description:"Admin dashboard with authentication"};function d({children:e}){return(0,s.jsx)("html",{lang:"en",suppressHydrationWarning:!0,children:(0,s.jsx)("body",{className:a().className,children:(0,s.jsx)(i.Providers,{children:e})})})}},96706:(e,t,r)=>{Promise.resolve().then(r.bind(r,15888))},97270:(e,t,r)=>{Promise.resolve().then(r.bind(r,59337))}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[243,70,658,683],()=>r(55952));module.exports=s})();